{"version":3,"sources":["SkinSampleSnake.js"],"names":["o0","require","o0CC","o0Game","cc","Class","extends","addSkin","name","skin","push","length","addBody","sprite","body","getComponent","Sprite","loader","loadRes","SpriteFrame","err","spriteFrame","clearSkin","removeAllBody","addHead","head","Node","parent","node","rotation","Math","random","addComponent","trim","type","Type","SLICED","sizeMode","SizeMode","CUSTOM","SrcBlendFactor","macro","BlendFactor","SRC_ALPHA","DstBlendFactor","ONE_MINUS_SRC_ALPHA","setGroup","GroupIndex","UI","width","size","height","eyeNode","Graphic","addEyeGraphic","active","i","addChild","x","y","collider","radius","start"],"mappings":";;;;;;AAAA,IAAIA,KAAKC,QAAQ,IAAR,CAAT;AACA,IAAIC,OAAOD,QAAQ,MAAR,CAAX;AACA,IAAIE,SAASF,QAAQ,QAAR,CAAb;;AAGAG,GAAGC,KAAH,CAAS;AACLC,aAASL,QAAQ,OAAR,CADJ;;AAGLM,aAAQ,iBAASC,IAAT,EAAc;AAClB,YAAG,KAAKC,IAAL,IAAa,IAAhB,EAAqB;AACjB,iBAAKA,IAAL,GAAY,EAAZ;AACA,iBAAKA,IAAL,CAAUC,IAAV,CAAeF,IAAf;AACH,SAHD,MAGM,IAAG,KAAKC,IAAL,CAAUE,MAAV,IAAoB,EAAvB,EAA0B;AAC5B;AACH,SAFK,MAED;AACD,iBAAKF,IAAL,CAAUC,IAAV,CAAeF,IAAf;AACA,iBAAKI,OAAL;AACH;AACD,YAAIC,SAAS,KAAKC,IAAL,CAAU,KAAKA,IAAL,CAAUH,MAAV,GAAiB,CAA3B,EAA8BI,YAA9B,CAA2CX,GAAGY,MAA9C,CAAb;AACAZ,WAAGa,MAAH,CAAUC,OAAV,CAAkB,WAASV,IAA3B,EAAiCJ,GAAGe,WAApC,EAAiD,UAAUC,GAAV,EAAeC,WAAf,EAA4B;AACzER,mBAAOQ,WAAP,GAAqBA,WAArB;AACH,SAFD;AAGH,KAjBI;AAkBLC,eAAU,qBAAU;AAChB,aAAKb,IAAL,GAAY,IAAZ;AACA,aAAKc,aAAL;AACA,YAAIV,SAAS,KAAKC,IAAL,CAAU,CAAV,EAAaC,YAAb,CAA0BX,GAAGY,MAA7B,CAAb;AACAH,eAAOQ,WAAP,GAAqB,IAArB;AACH,KAvBI;;AAyBLG,aAAQ,mBAAU;AACd,aAAKC,IAAL,GAAY,IAAIrB,GAAGsB,IAAP,CAAY,MAAZ,CAAZ;AACA,aAAKZ,IAAL,CAAUJ,IAAV,CAAe,KAAKe,IAApB;AACA,aAAKA,IAAL,CAAUE,MAAV,GAAmB,KAAKC,IAAxB;AACA,aAAKH,IAAL,CAAUI,QAAV,GAAqBC,KAAKC,MAAL,KAAgB,GAArC;AACA;;AAEA,YAAIlB,SAAS,KAAKC,IAAL,CAAU,KAAKA,IAAL,CAAUH,MAAV,GAAiB,CAA3B,EAA8BqB,YAA9B,CAA2C5B,GAAGY,MAA9C,EAAqD,CAArD,CAAb;AACAH,eAAOoB,IAAP,GAAc,IAAd;AACApB,eAAOqB,IAAP,GAAc9B,GAAGY,MAAH,CAAUmB,IAAV,CAAeC,MAA7B;AACAvB,eAAOwB,QAAP,GAAkBjC,GAAGY,MAAH,CAAUsB,QAAV,CAAmBC,MAArC;AACA1B,eAAO2B,cAAP,GAAwBpC,GAAGqC,KAAH,CAASC,WAAT,CAAqBC,SAA7C;AACA9B,eAAO+B,cAAP,GAAwBxC,GAAGqC,KAAH,CAASC,WAAT,CAAqBG,mBAA7C;AACA3C,aAAK4C,QAAL,CAAcjC,MAAd,EAAqBV,OAAO4C,UAAP,CAAkBC,EAAvC;AACAnC,eAAOe,IAAP,CAAYqB,KAAZ,GAAoB,KAAKC,IAAzB;AACArC,eAAOe,IAAP,CAAYuB,MAAZ,GAAqB,KAAKD,IAA1B;;AAEA,YAAIE,UAAU,IAAIhD,GAAGsB,IAAP,EAAd;AACA0B,gBAAQzB,MAAR,GAAiB,KAAKF,IAAtB;AACA,YAAI4B,UAAU,KAAKC,aAAL,CAAmBF,OAAnB,CAAd;AACH,KA7CI;AA8CLxC,aAAQ,mBAAU;AACd,YAAG,KAAKgB,IAAL,CAAU2B,MAAV,IAAoB,KAAvB,EACI;AACJ,YAAIC,IAAI,KAAK1C,IAAL,CAAUH,MAAlB;AACA,aAAKG,IAAL,CAAUJ,IAAV,CAAe,IAAIN,GAAGsB,IAAP,CAAY,SAAO8B,CAAnB,CAAf;AACA,aAAK5B,IAAL,CAAU6B,QAAV,CAAmB,KAAK3C,IAAL,CAAU0C,CAAV,CAAnB,EAAgC,CAACA,CAAjC;AACA,aAAK1C,IAAL,CAAU0C,CAAV,EAAaE,CAAb,GAAiB,KAAK5C,IAAL,CAAU0C,IAAE,CAAZ,EAAeE,CAAhC;AACA,aAAK5C,IAAL,CAAU0C,CAAV,EAAaG,CAAb,GAAiB,KAAK7C,IAAL,CAAU0C,IAAE,CAAZ,EAAeG,CAAhC;AACA,aAAK7C,IAAL,CAAU0C,CAAV,EAAa3B,QAAb,GAAwB,KAAKf,IAAL,CAAU0C,IAAE,CAAZ,EAAe3B,QAAvC;;AAEA,YAAI+B,WAAW,KAAK9C,IAAL,CAAU0C,CAAV,EAAaxB,YAAb,CAA0B,mBAA1B,CAAf;AACA;AACA4B,iBAASC,MAAT,GAAkB,KAAKA,MAAvB;;AAEA,YAAIhD,SAAS,KAAKC,IAAL,CAAU,KAAKA,IAAL,CAAUH,MAAV,GAAiB,CAA3B,EAA8BqB,YAA9B,CAA2C5B,GAAGY,MAA9C,EAAqD,CAArD,CAAb;AACAH,eAAOoB,IAAP,GAAc,IAAd;AACApB,eAAOqB,IAAP,GAAc9B,GAAGY,MAAH,CAAUmB,IAAV,CAAeC,MAA7B;AACAvB,eAAOwB,QAAP,GAAkBjC,GAAGY,MAAH,CAAUsB,QAAV,CAAmBC,MAArC;AACA1B,eAAO2B,cAAP,GAAwBpC,GAAGqC,KAAH,CAASC,WAAT,CAAqBC,SAA7C;AACA9B,eAAO+B,cAAP,GAAwBxC,GAAGqC,KAAH,CAASC,WAAT,CAAqBG,mBAA7C;AACA3C,aAAK4C,QAAL,CAAcjC,MAAd,EAAqBV,OAAO4C,UAAP,CAAkBC,EAAvC;AACAnC,eAAOe,IAAP,CAAYqB,KAAZ,GAAoB,KAAKC,IAAzB;AACArC,eAAOe,IAAP,CAAYuB,MAAZ,GAAqB,KAAKD,IAA1B;AACH,KArEI;AAsELY,WAAO,iBAAY,CAClB,CAvEI,CAuEH;AAvEG,CAAT","file":"SkinSampleSnake.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Snake","sourcesContent":["var o0 = require('o0');\r\nvar o0CC = require('o0CC');\r\nvar o0Game = require('o0Game');\r\n\r\n\r\ncc.Class({\r\n    extends: require('Snake'),\r\n\r\n    addSkin:function(name){\r\n        if(this.skin == null){\r\n            this.skin = [];\r\n            this.skin.push(name);\r\n        }else if(this.skin.length >= 20){\r\n            return;\r\n        }else{\r\n            this.skin.push(name);\r\n            this.addBody();\r\n        }\r\n        var sprite = this.body[this.body.length-1].getComponent(cc.Sprite);\r\n        cc.loader.loadRes('snake/'+name, cc.SpriteFrame, function (err, spriteFrame) {\r\n            sprite.spriteFrame = spriteFrame;\r\n        });\r\n    },\r\n    clearSkin:function(){\r\n        this.skin = null;\r\n        this.removeAllBody();\r\n        var sprite = this.body[0].getComponent(cc.Sprite);\r\n        sprite.spriteFrame = null;\r\n    },\r\n\r\n    addHead:function(){\r\n        this.head = new cc.Node('head');\r\n        this.body.push(this.head);\r\n        this.head.parent = this.node;\r\n        this.head.rotation = Math.random() * 360;\r\n        //Graphic.\r\n\r\n        var sprite = this.body[this.body.length-1].addComponent(cc.Sprite,0);\r\n        sprite.trim = true;\r\n        sprite.type = cc.Sprite.Type.SLICED;\r\n        sprite.sizeMode = cc.Sprite.SizeMode.CUSTOM;\r\n        sprite.SrcBlendFactor = cc.macro.BlendFactor.SRC_ALPHA;\r\n        sprite.DstBlendFactor = cc.macro.BlendFactor.ONE_MINUS_SRC_ALPHA;        \r\n        o0CC.setGroup(sprite,o0Game.GroupIndex.UI);\r\n        sprite.node.width = this.size;\r\n        sprite.node.height = this.size;\r\n        \r\n        var eyeNode = new cc.Node();\r\n        eyeNode.parent = this.head;\r\n        var Graphic = this.addEyeGraphic(eyeNode);\r\n    },\r\n    addBody:function(){\r\n        if(this.node.active == false)\r\n            return;\r\n        var i = this.body.length;\r\n        this.body.push(new cc.Node('body'+i));\r\n        this.node.addChild(this.body[i],-i);\r\n        this.body[i].x = this.body[i-1].x;\r\n        this.body[i].y = this.body[i-1].y;\r\n        this.body[i].rotation = this.body[i-1].rotation;\r\n\r\n        var collider = this.body[i].addComponent('cc.CircleCollider');\r\n        //collider.tag = o0Game.CollisionTag.Body;\r\n        collider.radius = this.radius;\r\n\r\n        var sprite = this.body[this.body.length-1].addComponent(cc.Sprite,0);\r\n        sprite.trim = true;\r\n        sprite.type = cc.Sprite.Type.SLICED;\r\n        sprite.sizeMode = cc.Sprite.SizeMode.CUSTOM;\r\n        sprite.SrcBlendFactor = cc.macro.BlendFactor.SRC_ALPHA;\r\n        sprite.DstBlendFactor = cc.macro.BlendFactor.ONE_MINUS_SRC_ALPHA;\r\n        o0CC.setGroup(sprite,o0Game.GroupIndex.UI);\r\n        sprite.node.width = this.size;\r\n        sprite.node.height = this.size;\r\n    },\r\n    start: function () {\r\n    },//必须保留\r\n});"]}