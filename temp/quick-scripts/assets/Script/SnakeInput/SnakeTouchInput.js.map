{"version":3,"sources":["SnakeTouchInput.js"],"names":["o0","require","o0CC","o0Game","cc","Class","extends","properties","touchLocation","speedingButton","onLoad","_super","self","addScriptNode","control","snake","node","setGroup","GroupIndex","UI","x","gameScene","canvas","width","y","height","name","on","Node","EventType","TOUCH_START","event","setTargetSpeeding","TOUCH_END","Vector2","listener","EventListener","TOUCH_ONE_BY_ONE","onTouchBegan","touch","getLocation","onTouchMoved","onTouchEnded","eventManager","addListener","start","dt","update","localLocation","parent","convertToNodeSpaceAR","setTargetVector","mod"],"mappings":";;;;;;AAAA,IAAIA,KAAKC,QAAQ,IAAR,CAAT;AACA,IAAIC,OAAOD,QAAQ,MAAR,CAAX;AACA,IAAIE,SAASF,QAAQ,QAAR,CAAb;;AAEAG,GAAGC,KAAH,CAAS;AACLC,aAASL,QAAQ,qBAAR,CADJ;AAELM,gBAAY;AACRC,uBAAe,IADP;AAERC,wBAAe;AAFP,KAFP;AAML;AACAC,YAAQ,kBAAY;AAChB,aAAKC,MAAL;AACA,YAAIC,OAAO,IAAX;;AAEA,aAAKH,cAAL,GAAsBP,KAAKW,aAAL,CAAmB,KAAKC,OAAL,CAAaC,KAAb,CAAmBC,IAAtC,EAA2C,YAA3C,EAAwD,EAAxD,CAAtB;AACAd,aAAKe,QAAL,CAAc,KAAKR,cAAnB,EAAkCN,OAAOe,UAAP,CAAkBC,EAApD;AACA,aAAKV,cAAL,CAAoBO,IAApB,CAAyBI,CAAzB,GAA6B,KAAKN,OAAL,CAAaC,KAAb,CAAmBM,SAAnB,CAA6BC,MAA7B,CAAoCN,IAApC,CAAyCO,KAAzC,GAA+C,CAA/C,GAAiD,GAA9E;AACA,aAAKd,cAAL,CAAoBO,IAApB,CAAyBQ,CAAzB,GAA6B,CAA7B;AACA,aAAKf,cAAL,CAAoBO,IAApB,CAAyBO,KAAzB,GAAiC,EAAjC;AACA,aAAKd,cAAL,CAAoBO,IAApB,CAAyBS,MAAzB,GAAkC,EAAlC,CATgB,CASqB;AACrC,aAAKhB,cAAL,CAAoBiB,IAApB,GAA2B,OAA3B;AACA,aAAKjB,cAAL,CAAoBO,IAApB,CAAyBW,EAAzB,CAA4BvB,GAAGwB,IAAH,CAAQC,SAAR,CAAkBC,WAA9C,EAA2D,UAAUC,KAAV,EAAiB;AACxEnB,iBAAKoB,iBAAL,CAAuB,IAAvB;AACH,SAFD,EAEG,IAFH;AAGA,aAAKvB,cAAL,CAAoBO,IAApB,CAAyBW,EAAzB,CAA4BvB,GAAGwB,IAAH,CAAQC,SAAR,CAAkBI,SAA9C,EAAyD,UAAUF,KAAV,EAAiB;AACtEnB,iBAAKoB,iBAAL,CAAuB,KAAvB;AACH,SAFD,EAEG,IAFH,EAdgB,CAgBP;;AAKT,aAAKxB,aAAL,GAAqB,IAAIR,GAAGkC,OAAP,CAAe,CAAf,EAAiB,CAAjB,CAArB;AACA;AACA;AACA,YAAIC,WAAW;AACXJ,mBAAO3B,GAAGgC,aAAH,CAAiBC,gBADb;AAEXC,0BAAc,sBAAUC,KAAV,EAAiBR,KAAjB,EAAwB;AAClCnB,qBAAKJ,aAAL,GAAqB+B,MAAMC,WAAN,EAArB;AACA,uBAAO,IAAP;AACH,aALU;AAMXC,0BAAc,sBAAUF,KAAV,EAAiBR,KAAjB,EAAwB;AAClCnB,qBAAKJ,aAAL,GAAqB+B,MAAMC,WAAN,EAArB;AACA,uBAAO,IAAP;AACH,aATU;AAUXE,0BAAc,sBAAUH,KAAV,EAAiBR,KAAjB,EAAwB;AAClCnB,qBAAKJ,aAAL,GAAqB+B,MAAMC,WAAN,EAArB;AACA,uBAAO,IAAP;AACH;AAbU,SAAf;AAeApC,WAAGuC,YAAH,CAAgBC,WAAhB,CAA4BT,QAA5B,EAAsC,KAAKnB,IAA3C;AACH,KA/CI;AAgDL6B,WAAO,eAAUC,EAAV,EAAc,CACpB,CAjDI;AAkDLC,YAAQ,gBAAUD,EAAV,EAAc;AAClB,aAAKnC,MAAL;AACA,YAAIqC,gBAAgB,KAAKhC,IAAL,CAAUiC,MAAV,CAAiBC,oBAAjB,CAAsC,KAAK1C,aAA3C,CAApB;AACA,aAAK2C,eAAL,CAAqB,IAAInD,GAAGkC,OAAP,CAAec,aAAf,EAA8BI,GAAnD;AACH,KAtDI,CAsDH;;;;AAtDG,CAAT","file":"SnakeTouchInput.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\SnakeInput","sourcesContent":["var o0 = require('o0');\r\nvar o0CC = require('o0CC');\r\nvar o0Game = require('o0Game');\r\n\r\ncc.Class({\r\n    extends: require('SnakeDirectionInput'),\r\n    properties: {\r\n        touchLocation: null,\r\n        speedingButton:null,\r\n    },\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._super();\r\n        var self = this;\r\n        \r\n        this.speedingButton = o0CC.addScriptNode(this.control.snake.node,'o0CCButton',10);\r\n        o0CC.setGroup(this.speedingButton,o0Game.GroupIndex.UI);\r\n        this.speedingButton.node.x = this.control.snake.gameScene.canvas.node.width/2-150;\r\n        this.speedingButton.node.y = 0;\r\n        this.speedingButton.node.width = 80;\r\n        this.speedingButton.node.height = 80;/** */\r\n        this.speedingButton.name = 'Boost';\r\n        this.speedingButton.node.on(cc.Node.EventType.TOUCH_START, function (event) {\r\n            self.setTargetSpeeding(true);\r\n        }, this);\r\n        this.speedingButton.node.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            self.setTargetSpeeding(false);\r\n        }, this);/** */\r\n\r\n\r\n\r\n\r\n        this.touchLocation = new o0.Vector2(1,0);\r\n        //TOUCH_ONE_BY_ONE\r\n        //TOUCH_ALL_AT_ONCE\r\n        var listener = {\r\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\r\n            onTouchBegan: function (touch, event) {\r\n                self.touchLocation = touch.getLocation();\r\n                return true;\r\n            },\r\n            onTouchMoved: function (touch, event) {\r\n                self.touchLocation = touch.getLocation();\r\n                return true;\r\n            },\r\n            onTouchEnded: function (touch, event) {\r\n                self.touchLocation = touch.getLocation();\r\n                return true;\r\n            },\r\n        }\r\n        cc.eventManager.addListener(listener, this.node);\r\n    },\r\n    start: function (dt) {\r\n    },\r\n    update: function (dt) {\r\n        this._super();\r\n        var localLocation = this.node.parent.convertToNodeSpaceAR(this.touchLocation);\r\n        this.setTargetVector(new o0.Vector2(localLocation).mod);\r\n    },/*\r\n    test:function(){\r\n        cc.log('mouse snake');\r\n    },/** */\r\n});"]}