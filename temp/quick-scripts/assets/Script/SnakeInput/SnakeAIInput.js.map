{"version":3,"sources":["SnakeAIInput.js"],"names":["o0","require","o0CC","o0Game","cc","Class","extends","properties","viewRate","patientTimer","targetFoodNode","onLoad","_super","setControllByPosition","Timer","update","dt","control","snake","radius","tryNextTiming","setTargetPosition","Vector2","onCollisionStay","other","self","node","active","groupIndex","GroupIndex","Food","nextTiming"],"mappings":";;;;;;AAAA,IAAIA,KAAKC,QAAQ,IAAR,CAAT;AACA,IAAIC,OAAOD,QAAQ,MAAR,CAAX;AACA,IAAIE,SAASF,QAAQ,QAAR,CAAb;;AAGAG,GAAGC,KAAH,CAAS;AACLC,aAASL,QAAQ,oBAAR,CADJ;AAELM,gBAAY;AACRC,kBAAS,EADD;AAERC,sBAAa,IAFL;AAGRC,wBAAe;AAHP,KAFP;AAOL;AACAC,YAAQ,kBAAY;AAChB,aAAKC,MAAL;AACA,aAAKC,qBAAL,CAA2B,IAA3B;AACA,aAAKJ,YAAL,GAAoB,IAAIT,GAAGc,KAAP,CAAa,CAAb,CAApB;AACH,KAZI;AAaLC,YAAQ,gBAAUC,EAAV,EAAc;AAClB,YAAG,KAAKC,OAAL,IAAgB,IAAhB,IAAwB,KAAKA,OAAL,CAAaC,KAAb,IAAsB,IAAjD,EAAsD;AAClD;AACH;AACD,aAAKC,MAAL,GAAc,KAAKF,OAAL,CAAaC,KAAb,CAAmBC,MAAnB,GAA0B,KAAKX,QAA7C;;AAEA;AACA;AACA;;AAEA,YAAG,KAAKE,cAAL,IAAuB,IAAvB,IAA+B,KAAKD,YAAL,CAAkBW,aAAlB,EAAlC,EAAoE;AAChE;AACA,iBAAKC,iBAAL,CAAuB,IAAIrB,GAAGsB,OAAP,CAAe,CAAf,EAAiB,CAAjB,CAAvB;AACA,iBAAKZ,cAAL,GAAsB,IAAtB;AACH;AACD,aAAKE,MAAL;AACH,KA7BI;AA8BLW,qBAAgB,yBAASC,KAAT,EAAeC,IAAf,EAAoB;AAChC,YAAGD,MAAME,IAAN,IAAc,IAAd,IAAsBF,MAAME,IAAN,CAAWC,MAAX,IAAqB,KAA3C,IAAoD,KAAKD,IAAL,IAAa,IAAjE,IAAyE,KAAKA,IAAL,CAAUC,MAAV,IAAoB,KAAhG,EAAsG;AAAC;AACnG;AACH;AACD,YAAG,KAAKjB,cAAL,IAAuB,IAAvB,IAA+Bc,MAAME,IAAN,CAAWE,UAAX,IAAyBzB,OAAO0B,UAAP,CAAkBC,IAA7E,EAAkF;AAC9E;AACA,iBAAKpB,cAAL,GAAsBc,MAAME,IAA5B;AACA,iBAAKL,iBAAL,CAAuB,IAAIrB,GAAGsB,OAAP,CAAe,KAAKZ,cAApB,CAAvB;AACA;AACA,iBAAKD,YAAL,CAAkBsB,UAAlB;AACH,SAV+B,CAU/B;AACJ;AAzCI,CAAT","file":"SnakeAIInput.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\SnakeInput","sourcesContent":["var o0 = require('o0');\r\nvar o0CC = require('o0CC');\r\nvar o0Game = require('o0Game');\r\n\r\n\r\ncc.Class({\r\n    extends: require('SnakePositionInput'),\r\n    properties: {\r\n        viewRate:10,\r\n        patientTimer:null,\r\n        targetFoodNode:null,\r\n    },\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._super();\r\n        this.setControllByPosition(true);\r\n        this.patientTimer = new o0.Timer(3);\r\n    },\r\n    update: function (dt) {\r\n        if(this.control == null || this.control.snake == null){\r\n            return;\r\n        }\r\n        this.radius = this.control.snake.radius*this.viewRate;\r\n\r\n        //可以修改的部分\r\n        //this.setTargetSpeeding(false);//设置是否加速\r\n        //this.setTargetVector();//设置目标方向\r\n\r\n        if(this.targetFoodNode == null || this.patientTimer.tryNextTiming()){\r\n            //this.setControllByPosition(false);\r\n            this.setTargetPosition(new o0.Vector2(0,0));\r\n            this.targetFoodNode = null;\r\n        }\r\n        this._super();\r\n    },\r\n    onCollisionStay:function(other,self){\r\n        if(other.node == null || other.node.active == false || this.node == null || this.node.active == false){//貌似能解决两蛇对撞导致卡死的bug\r\n            return;\r\n        }\r\n        if(this.targetFoodNode == null && other.node.groupIndex == o0Game.GroupIndex.Food){\r\n            //cc.log('dsadad');\r\n            this.targetFoodNode = other.node;\r\n            this.setTargetPosition(new o0.Vector2(this.targetFoodNode));\r\n            //this.setControllByPosition(true);\r\n            this.patientTimer.nextTiming();\r\n        }/* */\r\n    },\r\n});"]}