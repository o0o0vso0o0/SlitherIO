{"version":3,"sources":["PlayGround2.js"],"names":["o0","require","o0CC","o0Game","cc","Class","extends","CircleCollider","properties","canvas","camera","backgroundGraphic","onLoad","radius","displayRadius","setGroup","GroupIndex","PlayGround","background","node","addComponent","Graphics","clear","circle","fillColor","Color","fill","boundary","addGraphicNode","i","strokeColor","stroke","start","listener","event","EventListener","MOUSE","onMouseDown","onMouseUp","log","onMouseMove","onMouseScroll","eventManager","addListener","lateUpdate","dt","patternSize","rectPos","convertToWorldSpaceAR","v2","Vector2","convertToNodeSpaceAR","rectHalfSize","multiply","zoomRatio","minus","rectSize","lineWidth","parseInt","x","moveTo","y","lineTo","color","Math","abs","cos"],"mappings":";;;;;;AAAA,IAAIA,KAAKC,QAAQ,IAAR,CAAT;AACA,IAAIC,OAAOD,QAAQ,MAAR,CAAX;AACA,IAAIE,SAASF,QAAQ,QAAR,CAAb;;AAEAG,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,cADP;;AAGLC,gBAAY;AACRC,gBAAO,IADC;AAERC,gBAAO,IAFC;AAGRC,2BAAkB;AAHV,KAHP;;AAULC,YAAQ,kBAAY;AAChB,aAAKC,MAAL,GAAc,IAAd;AACA;;AAEA,YAAIC,gBAAgB,KAAKD,MAAL,GAAY,EAAhC;;AAEAX,aAAKa,QAAL,CAAc,IAAd,EAAmBZ,OAAOa,UAAP,CAAkBC,UAArC;AACA,YAAIC,aAAa,KAAKC,IAAL,CAAUC,YAAV,CAAuBhB,GAAGiB,QAA1B,CAAjB;AACAH,mBAAWI,KAAX;AACAJ,mBAAWK,MAAX,CAAkB,CAAlB,EAAqB,CAArB,EAAwBT,gBAAc,CAAtC;AACAI,mBAAWM,SAAX,GAAuB,IAAIpB,GAAGqB,KAAP,CAAa,GAAb,EAAkB,EAAlB,EAAsB,EAAtB,EAA0B,GAA1B,CAAvB;AACAP,mBAAWQ,IAAX,GAXgB,CAWE;AAClBR,mBAAWK,MAAX,CAAkB,CAAlB,EAAqB,CAArB,EAAwBT,aAAxB;AACAI,mBAAWM,SAAX,GAAuB,IAAIpB,GAAGqB,KAAP,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,GAAzB,CAAvB;AACAP,mBAAWQ,IAAX,GAdgB,CAcE;;AAElB,YAAIC,WAAWzB,KAAK0B,cAAL,CAAoB,KAAKT,IAAzB,EAA8B,CAA9B,CAAf;AACAQ,iBAASL,KAAT;AACA,aAAI,IAAIO,IAAI,CAAZ,EAAcA,IAAE,GAAhB,EAAoB,EAAEA,CAAtB,EAAwB;AACpBF,qBAASJ,MAAT,CAAgB,CAAhB,EAAmB,CAAnB,EAAsBT,gBAAc,GAAd,GAAkBe,CAAxC;AACAF,qBAASG,WAAT,GAAuB,IAAI1B,GAAGqB,KAAP,CAAa,KAAGI,IAAE,CAAlB,EAAqB,EAArB,EAAyB,EAAzB,EAA6BA,IAAE,GAA/B,CAAvB;AACAF,qBAASI,MAAT;AACH;;AAED,aAAKpB,iBAAL,GAAyB,KAAKQ,IAAL,CAAUC,YAAV,CAAuBhB,GAAGiB,QAA1B,CAAzB;AACH,KAnCI;;AAqCLW,WAAM,iBAAU;AACZ,YAAIC,WAAW;AACXC,mBAAO9B,GAAG+B,aAAH,CAAiBC,KADb;AAEXC,yBAAa,qBAAUH,KAAV,EAAiB,CAC7B,CAHU;AAIXI,uBAAW,mBAAUJ,KAAV,EAAiB;AACxB9B,mBAAGmC,GAAH;AACH,aANU;AAOXC,yBAAa,qBAAUN,KAAV,EAAiB;AAC1B;AACH,aATU;AAUXO,2BAAe,uBAAUP,KAAV,EAAiB,CAC/B;AAXU,SAAf;AAaA9B,WAAGsC,YAAH,CAAgBC,WAAhB,CAA4BV,QAA5B,EAAsC,KAAKd,IAA3C;AACH,KApDI;AAqDLyB,gBAAY,oBAAUC,EAAV,EAAc;AACtB,YAAIC,cAAc,CAAlB;AACA,YAAIC,UAAU,KAAKrC,MAAL,CAAYS,IAAZ,CAAiB6B,qBAAjB,CAAuC5C,GAAG6C,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAvC,CAAd;AACAF,kBAAU,IAAI/C,GAAGkD,OAAP,CAAe,KAAK/B,IAAL,CAAUgC,oBAAV,CAA+BJ,OAA/B,CAAf,CAAV;AACA,YAAIK,eAAc,IAAIpD,GAAGkD,OAAP,CAAe,KAAK/B,IAAL,CAAUgC,oBAAV,CAA+B/C,GAAG6C,EAAH,CAAM,CAACH,WAAP,EAAmB,CAACA,WAApB,CAA/B,CAAf,EAAiFO,QAAjF,CAA0F,CAAC,CAAD,GAAI,KAAK3C,MAAL,CAAY4C,SAA1G,CAAlB,CAJsB,CAIiH;AACvIP,kBAAUA,QAAQQ,KAAR,CAAcH,YAAd,CAAV;AACA,YAAII,WAAWJ,aAAaC,QAAb,CAAsB,CAAtB,CAAf;;AAEA,aAAK1C,iBAAL,CAAuBW,KAAvB;AACA,aAAKX,iBAAL,CAAuB8C,SAAvB,GAAmC,CAAnC;AACA,aAAI,IAAI5B,IAAI6B,SAASX,QAAQY,CAAjB,CAAZ,EAAgC9B,IAAE6B,SAASX,QAAQY,CAAR,GAAUH,SAASG,CAAT,GAAW,GAA9B,CAAlC,EAAqE,EAAE9B,CAAvE,EAAyE;AACrE,iBAAKlB,iBAAL,CAAuBiD,MAAvB,CAA8B/B,CAA9B,EAAgC6B,SAASX,QAAQc,CAAjB,CAAhC;AACA,iBAAKlD,iBAAL,CAAuBmD,MAAvB,CAA8BjC,IAAE6B,SAASF,SAASG,CAAT,GAAW,GAApB,CAAhC,EAAyDD,SAASX,QAAQc,CAAR,GAAUL,SAASK,CAA5B,CAAzD;AACA,gBAAIE,QAAQC,KAAKC,GAAL,CAASD,KAAKE,GAAL,CAASrC,IAAE,EAAX,CAAT,IAA2B,EAAvC;AACA,iBAAKlB,iBAAL,CAAuBmB,WAAvB,GAAqC,IAAI1B,GAAGqB,KAAP,CAAasC,KAAb,EAAmBA,QAAM,GAAzB,EAA6BA,QAAM,GAAnC,EAAuC,GAAvC,CAArC;AACA,iBAAKpD,iBAAL,CAAuBoB,MAAvB;AACH;AACD,aAAI,IAAIF,IAAG6B,SAASX,QAAQc,CAAjB,CAAX,EAA+BhC,IAAE6B,SAASX,QAAQc,CAAR,GAAUL,SAASK,CAAT,GAAW,GAA9B,CAAjC,EAAoE,EAAEhC,CAAtE,EAAwE;AACpE,iBAAKlB,iBAAL,CAAuBiD,MAAvB,CAA8BF,SAASX,QAAQY,CAAjB,CAA9B,EAAkD9B,IAAE6B,SAASF,SAASK,CAAT,GAAW,GAApB,CAApD;AACA,iBAAKlD,iBAAL,CAAuBmD,MAAvB,CAA8BJ,SAASX,QAAQY,CAAR,GAAUH,SAASG,CAA5B,CAA9B,EAA6D9B,CAA7D;AACA,gBAAIkC,QAAQC,KAAKC,GAAL,CAASD,KAAKE,GAAL,CAASrC,IAAE,EAAX,CAAT,IAA2B,EAAvC;AACA,iBAAKlB,iBAAL,CAAuBmB,WAAvB,GAAqC,IAAI1B,GAAGqB,KAAP,CAAasC,KAAb,EAAmBA,QAAM,GAAzB,EAA6BA,QAAM,GAAnC,EAAuC,GAAvC,CAArC;AACA,iBAAKpD,iBAAL,CAAuBoB,MAAvB,GALoE,CAKpC;AACnC;AACJ;;AA7EI,CAAT","file":"PlayGround2.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["var o0 = require('o0');\r\nvar o0CC = require('o0CC');\r\nvar o0Game = require('o0Game');\r\n\r\ncc.Class({\r\n    extends: cc.CircleCollider,\r\n\r\n    properties: {\r\n        canvas:null,\r\n        camera:null,\r\n        backgroundGraphic:null,\r\n    },\r\n\r\n    \r\n    onLoad: function () {\r\n        this.radius = 2000;\r\n        //this.tag = o0Game.CollisionTag.PlayGround;\r\n\r\n        var displayRadius = this.radius+40;\r\n\r\n        o0CC.setGroup(this,o0Game.GroupIndex.PlayGround);\r\n        var background = this.node.addComponent(cc.Graphics);\r\n        background.clear();\r\n        background.circle(0, 0, displayRadius*2);\r\n        background.fillColor = new cc.Color(155, 23, 33, 255);\r\n        background.fill();/** */\r\n        background.circle(0, 0, displayRadius);\r\n        background.fillColor = new cc.Color(16, 23, 33, 255);\r\n        background.fill();/** */\r\n\r\n        var boundary = o0CC.addGraphicNode(this.node,1);\r\n        boundary.clear();\r\n        for(var i = 0;i<100;++i){\r\n            boundary.circle(0, 0, displayRadius-100+i);\r\n            boundary.strokeColor = new cc.Color(16+i/2, 23, 33, i*2.5);\r\n            boundary.stroke();\r\n        }\r\n\r\n        this.backgroundGraphic = this.node.addComponent(cc.Graphics);\r\n    },\r\n\r\n    start:function(){        \r\n        var listener = {\r\n            event: cc.EventListener.MOUSE,\r\n            onMouseDown: function (event) { \r\n            },\r\n            onMouseUp: function (event) {\r\n                cc.log();\r\n            },\r\n            onMouseMove: function (event) {\r\n                //self.mouseLocation = event.getLocation();\r\n            },\r\n            onMouseScroll: function (event) {\r\n            }\r\n        }\r\n        cc.eventManager.addListener(listener, this.node);\r\n    },\r\n    lateUpdate: function (dt) {\r\n        var patternSize = 0;\r\n        var rectPos = this.camera.node.convertToWorldSpaceAR(cc.v2(0,0));\r\n        rectPos = new o0.Vector2(this.node.convertToNodeSpaceAR(rectPos));\r\n        var rectHalfSize= new o0.Vector2(this.node.convertToNodeSpaceAR(cc.v2(-patternSize,-patternSize))).multiply(-1/ this.camera.zoomRatio);//坐标换算不吃camera的radio\r\n        rectPos = rectPos.minus(rectHalfSize);\r\n        var rectSize = rectHalfSize.multiply(2);\r\n\r\n        this.backgroundGraphic.clear();\r\n        this.backgroundGraphic.lineWidth = 1;\r\n        for(var i = parseInt(rectPos.x);i<parseInt(rectPos.x+rectSize.x*1.1);++i){\r\n            this.backgroundGraphic.moveTo(i,parseInt(rectPos.y));\r\n            this.backgroundGraphic.lineTo(i-parseInt(rectSize.x*0.1),parseInt(rectPos.y+rectSize.y));\r\n            var color = Math.abs(Math.cos(i/50)) * 50;\r\n            this.backgroundGraphic.strokeColor = new cc.Color(color,color*1.1,color*1.2,100);\r\n            this.backgroundGraphic.stroke();\r\n        }\r\n        for(var i= parseInt(rectPos.y);i<parseInt(rectPos.y+rectSize.y*1.1);++i){\r\n            this.backgroundGraphic.moveTo(parseInt(rectPos.x),i-parseInt(rectSize.y*0.1));\r\n            this.backgroundGraphic.lineTo(parseInt(rectPos.x+rectSize.x),i);\r\n            var color = Math.abs(Math.cos(i/50)) * 50;\r\n            this.backgroundGraphic.strokeColor = new cc.Color(color,color*1.1,color*1.2,100);\r\n            this.backgroundGraphic.stroke();/** */\r\n        }\r\n    },\r\n\r\n});"]}