{"version":3,"sources":["o0.js"],"names":["module","exports","Timer","second","interval","nextTiming","date","Date","isDue","getTime","FixedTimer","fps","updateInterval","remainder","newTime","parseInt","FixedTimerDT","dt","Vector2","arguments","length","x","y","anotherVector","Math","asin","sqrt","pow","anotherModVector","radian","PI","cosRadian","cos","sinRadian","sin","constructor","angle","rotate","num","mod","Line2","a","b","index","minus","vector","Rect","position","size","plus","vertex","edges","i","push","edge","value","Vector3","z","isSameSign","distance2","distance","maxLengthLine2","vertexs","maxLengthLine","maxLength","j","newLine","newLength","randomInCircle2","center","random","toLength","intersectionLineLine2","p11","p12","p21","p22","denominator","t","u","arrangeInLine1","p1","p2","values","ceil","arrangeInLine2","origin","begin","end","points","modVector","multiply","pointOnLineSegment","line","point","acceptableError","v1","v2","lineSegmentInRect","rect","ip","newIp","arrangeInRect2","horizontalVector","verticalVector","pos","verticalPoints","horizontalPoints","concat"],"mappings":"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","file":"o0.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\o0Lib","sourcesContent":["module.exports = {\r\n    Timer: class{\r\n        constructor(second) {\r\n            this.interval = second * 1000;\r\n            this.nextTiming();\r\n        }\r\n        get isDue(){\r\n            return new Date().getTime() - this.date.getTime() >= this.interval;\r\n        }\r\n        nextTiming(){\r\n            this.date = new Date();\r\n        }\r\n        tryNextTiming(){\r\n            if(!this.isDue){\r\n                return false;\r\n            }\r\n            this.nextTiming();\r\n            return true;\r\n        }\r\n    },\r\n    FixedTimer:class{\r\n        constructor(fps) {\r\n            this.fps = fps;\r\n            this.updateInterval = 1000.0/fps;\r\n            this.remainder = 0;\r\n            this.nextTiming();\r\n        }\r\n        nextTiming(){\r\n            this.date = new Date();\r\n        }\r\n        fixedUpdateTimes(){\r\n            var newTime = new Date();\r\n            var interval = newTime.getTime() - this.date.getTime() + this.remainder;\r\n            this.date = newTime;\r\n            this.remainder = interval % this.updateInterval;\r\n\r\n            return parseInt(interval / this.updateInterval);\r\n        }\r\n    },\r\n    FixedTimerDT:class{\r\n        constructor(fps) {\r\n            this.fps = fps;\r\n            this.updateInterval = 1000.0/fps;\r\n            this.remainder = 0;\r\n        }\r\n        fixedUpdateTimes(dt){//time in second\r\n            var interval = dt*1000 + this.remainder;\r\n            this.remainder = interval % this.updateInterval;\r\n\r\n            //cc.log(parseInt(interval / this.updateInterval));\r\n            return parseInt(interval / this.updateInterval);\r\n        }\r\n    },\r\n    Vector2: class{\r\n        constructor() {\r\n            switch(arguments.length) {\r\n                default:\r\n        　　    case 1:\r\n        　　　　　　this.x = arguments[0].x;\r\n        　　　　　　this.y = arguments[0].y;\r\n        　　　　    break;\r\n        　　    case 2:\r\n        　　　　　　this.x = arguments[0];\r\n        　　　　　　this.y = arguments[1];\r\n        　　　　    break;\r\n            }\r\n        }\r\n        get length(){\r\n            if(this.x == 0 && this.y == 0)\r\n                return 0;\r\n            return Math.sqrt(this.x*this.x+this.y*this.y);\r\n        }/** */\r\n        get mod(){\r\n            var length = this.length;\r\n            return new this.constructor(this.x/length,this.y/length);\r\n        }/**/\r\n        radian(anotherVector){//都必须是长度为1的vector\r\n            return Math.asin(Math.sqrt(Math.pow(this.x - anotherVector.x,2)+Math.pow(this.y - anotherVector.y,2))/2)*2; \r\n        }\r\n        angle(anotherModVector){\r\n            return this.radian(anotherModVector)/Math.PI*180; \r\n        }\r\n        rotate(radian){\r\n            var cosRadian = Math.cos(radian);\r\n            var sinRadian = Math.sin(radian);\r\n            return new this.constructor(this.x * cosRadian + this.y * sinRadian, this.y * cosRadian - this.x * sinRadian);\r\n        }\r\n        rotateAngle(angle){\r\n            return this.rotate(angle / 180 * Math.PI);\r\n        }\r\n        plus(anotherVector){\r\n            return new this.constructor(this.x + anotherVector.x, this.y + anotherVector.y);\r\n        }\r\n        minus(anotherVector){\r\n            return new this.constructor(this.x - anotherVector.x, this.y - anotherVector.y);\r\n        }\r\n        multiply(num){\r\n            return new this.constructor(this.x * num, this.y * num);\r\n        }\r\n        toLength(length){\r\n            var mod = this.mod;\r\n            return new this.constructor(mod.x * length, mod.y * length);\r\n        }\r\n    },\r\n    Line2:class{\r\n        constructor() {\r\n            switch(arguments.length) {\r\n                default:\r\n        　　    case 1:\r\n        　　　　　　this.a = arguments[0].a;\r\n        　　　　　　this.b = arguments[0].b;\r\n        　　　　    break;\r\n        　　    case 2:\r\n        　　　　　　this.a = arguments[0];\r\n        　　　　　　this.b = arguments[1];\r\n        　　　　    break;\r\n        　　    case 4:\r\n        　　　　　　this.a = new module.exports.Vector2(arguments[0],arguments[1]);\r\n        　　　　　　this.b = new module.exports.Vector2(arguments[2],arguments[3]);\r\n        　　　　    break;\r\n            }\r\n        }\r\n        vertex(index){\r\n            switch(index){\r\n                default:\r\n                case 0:\r\n                    return this.a;\r\n                case 1:\r\n                    return this.b;\r\n            }\r\n        }\r\n        get vector(){\r\n            return this.b.minus(this.a);\r\n        }\r\n        get length(){\r\n            return this.vector.length;\r\n        }\r\n    },\r\n    Rect:class{\r\n        constructor() {\r\n            switch(arguments.length) {\r\n                default:\r\n        　　    case 1:\r\n        　　　　　　this.position = arguments[0].position;\r\n        　　　　　　this.size = arguments[0].size;\r\n        　　　　    break;\r\n        　　    case 2:\r\n        　　　　　　this.position = arguments[0];\r\n        　　　　　　this.size = arguments[1];\r\n        　　　　    break;\r\n        　　    case 4:\r\n        　　　　　　this.position = new module.exports.Vector2(arguments[0],arguments[1]);\r\n        　　　　　　this.size = new module.exports.Vector2(arguments[2],arguments[3]);\r\n        　　　　    break;\r\n            }\r\n        }\r\n        vertex(index){\r\n            switch(index){\r\n                default:\r\n                case 0:\r\n                    return this.position;\r\n                case 1:\r\n                    return new module.exports.Vector2(this.position.x,this.position.y+this.size.y);\r\n                case 2:\r\n                    return this.position.plus(this.size);\r\n                case 3:\r\n                    return new module.exports.Vector2(this.position.x+this.size.x,this.position.y);\r\n            }\r\n        }//Clockwise\r\n        edge(index){\r\n            switch(index){\r\n                default:\r\n                case 0:\r\n                    return new module.exports.Line2(this.vertex(0),this.vertex(1));\r\n                case 1:\r\n                    return new module.exports.Line2(this.vertex(1),this.vertex(2));\r\n                case 2:\r\n                    return new module.exports.Line2(this.vertex(2),this.vertex(3));\r\n                case 3:\r\n                    return new module.exports.Line2(this.vertex(3),this.vertex(0));\r\n            }\r\n        }//Clockwise\r\n        get vertexs(){\r\n            var edges = [];\r\n            for(var i = 0;i<4;++i){\r\n                edges.push(this.vertex(i));\r\n            }\r\n            return edges;\r\n        }\r\n        get edges(){\r\n            var edges = [];\r\n            for(var i = 0;i<4;++i){\r\n                edges.push(this.edge(i));\r\n            }\r\n            return edges;\r\n        }\r\n        get pos(){\r\n            return this.position;\r\n        }\r\n        set pos(value){\r\n            this.position = value;\r\n        }\r\n        get x(){\r\n            return this.position.x;\r\n        }\r\n        set x(value){\r\n            this.position.x = value;\r\n        }\r\n        get y(){\r\n            return this.position.y;\r\n        }\r\n        set y(value){\r\n            this.position.y = value;\r\n        }\r\n        get width(){\r\n            return this.size.x;\r\n        }\r\n        set width(value){\r\n            this.size.x = value;\r\n        }\r\n        get height(){\r\n            return this.size.y;\r\n        }\r\n        set height(value){\r\n            this.size.y = value;\r\n        }\r\n    },\r\n    Vector3: class{\r\n        constructor() {\r\n            switch(arguments.length) {\r\n                default:\r\n                case 1:\r\n                    this.x = arguments[0].x;\r\n                    this.y = arguments[0].y;\r\n                    this.z = arguments[0].z;\r\n                    break;\r\n                case 3:\r\n                    this.x = arguments[0];\r\n                    this.y = arguments[1];\r\n                    this.z = arguments[2];\r\n                    break;\r\n            }\r\n        }\r\n        get length(){\r\n            if(this.x == 0 && this.y == 0 && this.z == 0)\r\n                return 0;\r\n            return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);\r\n        }/** */\r\n        get mod(){\r\n            var length = this.length;\r\n            return new this.constructor(this.x/length,this.y/length,this.z/length);\r\n        }\r\n        plus(anotherVector){\r\n            return new this.constructor(this.x + anotherVector.x, this.y + anotherVector.y, this.z + anotherVector.z);\r\n        }\r\n        minus(anotherVector){\r\n            return new this.constructor(this.x - anotherVector.x, this.y - anotherVector.y, this.z - anotherVector.z);\r\n        }\r\n        multiply(num){\r\n            return new this.constructor(this.x * num, this.y * num, this.z * num);\r\n        }\r\n        toLength(length){\r\n            var mod = this.mod;\r\n            return new this.constructor(mod.x * length, mod.y * length, mod.z * length);\r\n        }\r\n    },\r\n    isSameSign:function(a,b){\r\n        if((a>=0&&b>=0)||(a<=0&&b<=0)){\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    distance2:function(a,b){\r\n        var distance = Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2));\r\n        switch(arguments.length) {\r\n            default:\r\n            case 2:\r\n                return distance;\r\n            case 3:\r\n                var vector = arguments[2];//vector must be in same line with a b\r\n                if(module.exports.isSameSign(b.x - a.x,vector.x)&&module.exports.isSameSign(b.y - a.y,vector.y)){\r\n                    return distance;\r\n                }else{\r\n                    return -distance;\r\n                }\r\n        }\r\n    },\r\n    maxLengthLine2:function(vertexs){\r\n        if(vertexs.length==0){\r\n            return null;\r\n        }\r\n        if(vertexs.length==1){\r\n            return new module.exports.Line2(vertexs[0],vertexs[0]);\r\n        }\r\n        var maxLengthLine = null;\r\n        var maxLength = -1;\r\n        for(var i = 0;i<vertexs.length-1;++i){            \r\n            for(var j = i+1;j<vertexs.length;++j){\r\n                var newLine = new module.exports.Line2(vertexs[i],vertexs[j]);\r\n                var newLength = newLine.length;\r\n                if(maxLength < newLength){\r\n                    maxLength = newLength;\r\n                    maxLengthLine = newLine;\r\n                }\r\n            }\r\n        }\r\n        return maxLengthLine;\r\n    },\r\n    randomInCircle2:function(){\r\n        var center;//diameter\r\n        var size;//diameter\r\n        switch(arguments.length) {\r\n            default:\r\n            case 1:\r\n                center = new module.exports.Vector2(0,0);\r\n                size = arguments[0];\r\n                break;\r\n            case 2:\r\n                center = arguments[0];\r\n                size = arguments[1];\r\n                break;\r\n        }\r\n        return new module.exports.Vector2(1,0).rotate(Math.random() * Math.PI*2).toLength(Math.sqrt(Math.random()*Math.pow(size/2,2))).plus(center);\r\n    },\r\n    intersectionLineLine2:function(){//for 2D //https://en.wikipedia.org/wiki/Line%E2%80%93line_intersection\r\n        var p11,p12,p21,p22;\r\n        switch(arguments.length) {\r\n            default:\r\n            case 4:\r\n                p11 = arguments[0];\r\n                p12 = arguments[1];\r\n                p21 = arguments[2];\r\n                p22 = arguments[3];\r\n                break;\r\n            case 2:\r\n                p11 = arguments[0].a;\r\n                p12 = arguments[0].b;\r\n                p21 = arguments[1].a;\r\n                p22 = arguments[1].b;\r\n                break;\r\n        }\r\n        var denominator = (p11.x-p12.x)*(p21.y-p22.y) - (p11.y-p12.y)*(p21.x-p22.x);\r\n        if(denominator == 0){\r\n            return null;\r\n        }\r\n        var t = ((p11.x-p21.x)*(p21.y-p22.y) - (p11.y-p21.y)*(p21.x-p22.x))/denominator;\r\n        var u = ((p11.x-p12.x)*(p11.y-p21.y) - (p11.y-p12.y)*(p11.x-p21.x))/denominator;\r\n        return new module.exports.Vector2(p11.x+t*(p12.x-p11.x),p11.y+t*(p12.y-p11.y));\r\n    },\r\n    arrangeInLine1:function(p1, p2, vector){//1维//vector为正,p1小于p2\r\n        var values = [];\r\n        for(var i =  Math.ceil(p1/vector)*vector;i<=p2;i+=vector){\r\n            values.push(i);\r\n        }\r\n        return values;\r\n    },\r\n    arrangeInLine2:function(){//3点必须在1线\r\n        //return [];\r\n        var p1, p2, origin, vector;\r\n        switch(arguments.length) {\r\n            default:\r\n            case 4:\r\n                p1 = arguments[0];\r\n                p2 = arguments[1];\r\n                origin = arguments[2];\r\n                vector = arguments[3];\r\n                break;\r\n            case 3:\r\n                if(arguments[0] == null){\r\n                    return [];\r\n                } \r\n                p1 = arguments[0].a;\r\n                p2 = arguments[0].b;\r\n                origin = arguments[1];\r\n                vector = arguments[2];\r\n                break;\r\n        }\r\n        var begin,end;\r\n        if(module.exports.isSameSign(p2.x - p1.x,vector.x)&&module.exports.isSameSign(p2.y - p1.y,vector.y)){\r\n            begin = p1;\r\n            end = p2;\r\n        }else{\r\n            begin = p2;\r\n            end = p1;\r\n        }\r\n        if(module.exports.isSameSign(begin.x - origin.x,vector.x)&&module.exports.isSameSign(begin.y - origin.y,vector.y)){\r\n            begin = module.exports.distance2(origin,begin);\r\n        }else{\r\n            begin = -module.exports.distance2(origin,begin);\r\n        }\r\n        if(module.exports.isSameSign(end.x - origin.x,vector.x)&&module.exports.isSameSign(end.y - origin.y,vector.y)){\r\n            end = module.exports.distance2(origin,end);\r\n        }else{\r\n            end = -module.exports.distance2(origin,end);\r\n        }\r\n        var points = [];\r\n        var modVector = vector.mod;\r\n        var values = module.exports.arrangeInLine1(begin, end, vector.length);\r\n        for(var i = 0;i<values.length;++i){\r\n            points.push(origin.plus(modVector.multiply(values[i])));\r\n        }\r\n        return points;/** */        \r\n    },\r\n    pointOnLineSegment(line,point){\r\n        var acceptableError = line.length / 1000000;//存在计算误差\r\n        var v1 = line.a.minus(point);\r\n        var v2 = line.b.minus(point);\r\n        if(module.exports.isSameSign(v1.x,v2.x)&&module.exports.isSameSign(v1.y,v2.y)&&v1.length>=acceptableError&&v2.length>=acceptableError){//存在计算误差\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n    lineSegmentInRect(rect,line){\r\n        var edge = rect.edges;\r\n        var ip = [];\r\n        for(var i = 0;i<edge.length;++i){\r\n            var newIp = module.exports.intersectionLineLine2(edge[i], line);\r\n            if(newIp != null &&module.exports.pointOnLineSegment(edge[i],newIp)){\r\n                ip.push(newIp);\r\n            }\r\n        }\r\n        return module.exports.maxLengthLine2(ip);/** */\r\n    },\r\n    arrangeInRect2:function(rect, origin, horizontalVector, verticalVector){\r\n        var ip = [];\r\n        for(var i = 0; i < 4;++i){\r\n            ip.push(module.exports.intersectionLineLine2(origin,origin.plus(verticalVector),rect.vertex(i),rect.vertex(i).plus(horizontalVector)));\r\n        }\r\n        if(module.exports.distance2(ip[0],ip[2]) > module.exports.distance2(ip[1],ip[3])){\r\n            ip = [ip[0],ip[2],ip[1],ip[3]];//verticalBegin;verticalEnd;horizontalBegin;horizontalEnd;\r\n        }else{\r\n            ip = [ip[1],ip[3],ip[0],ip[2]];//verticalBegin;verticalEnd;horizontalBegin;horizontalEnd;\r\n        }\r\n        var pos = [];\r\n        var verticalPoints = module.exports.arrangeInLine2(ip[0],ip[1],origin,verticalVector);\r\n        for(var i = 0; i<verticalPoints.length;++i){\r\n            var lineSegmentInRect = module.exports.lineSegmentInRect(rect,new module.exports.Line2(verticalPoints[i],verticalPoints[i].plus(horizontalVector)));//}/*\r\n            var horizontalPoints = module.exports.arrangeInLine2(lineSegmentInRect,verticalPoints[i],horizontalVector);\r\n            pos = pos.concat(horizontalPoints);\r\n        }\r\n        return pos;/** */\r\n        //return verticalPoints;\r\n    }\r\n};"]}