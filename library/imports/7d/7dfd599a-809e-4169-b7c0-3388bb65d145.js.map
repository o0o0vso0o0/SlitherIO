{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\SnakeInput/assets\\Script\\SnakeInput\\SnakeKeyboardArrowkeyInput.js"],"names":["o0","require","o0CC","cc","Class","extends","properties","keyDirection","key","speedingKey","onLoad","_super","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","Array","macro","KEY","right","Vector2","left","up","down","d","a","w","s","space","onDestroy","off","update","dt","targetVector","_key","plus","length","setTargetVector","mod","removeTargetVector","event","keyCode","setTargetSpeeding"],"mappings":"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","file":"SnakeKeyboardArrowkeyInput.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\SnakeInput","sourcesContent":["var o0 = require('o0');\r\nvar o0CC = require('o0CC');\r\n\r\n\r\ncc.Class({\r\n    extends: require('SnakeDirectionInput'),\r\n    properties: {\r\n        keyDirection:null,\r\n        key:null,\r\n        speedingKey:0,\r\n    },\r\n    onLoad: function () {\r\n        this._super();\r\n\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n\r\n        this.keyDirection = new Array();\r\n        this.keyDirection[cc.macro.KEY.right] = new o0.Vector2(1,0);\r\n        this.keyDirection[cc.macro.KEY.left] = new o0.Vector2(-1,0);\r\n        this.keyDirection[cc.macro.KEY.up] = new o0.Vector2(0,1);\r\n        this.keyDirection[cc.macro.KEY.down] = new o0.Vector2(0,-1);\r\n        this.keyDirection[cc.macro.KEY.d] = new o0.Vector2(1,0);\r\n        this.keyDirection[cc.macro.KEY.a] = new o0.Vector2(-1,0);\r\n        this.keyDirection[cc.macro.KEY.w] = new o0.Vector2(0,1);\r\n        this.keyDirection[cc.macro.KEY.s] = new o0.Vector2(0,-1);\r\n        this.key = new Array();\r\n        this.speedingKey = cc.macro.KEY.space;\r\n    },\r\n    onDestroy () {\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);      \r\n    },\r\n    update: function (dt) {\r\n        var targetVector = new o0.Vector2(0,0);\r\n        for(var _key in this.keyDirection){\r\n            if(this.key[_key] == true){\r\n                targetVector = targetVector.plus(this.keyDirection[_key]);\r\n            }\r\n        }\r\n        if(this.keyDirection.length != 0 && targetVector.length != 0){\r\n            this.setTargetVector(targetVector.mod);\r\n        }else{\r\n            this.removeTargetVector();\r\n        }\r\n        \r\n        this._super();\r\n    },\r\n\r\n    onKeyDown: function (event) {\r\n        if(this.keyDirection[event.keyCode] != null){\r\n            this.key[event.keyCode] = true;\r\n        }\r\n        if(event.keyCode == this.speedingKey){\r\n            this.setTargetSpeeding(true);   \r\n        }\r\n    },\r\n    onKeyUp: function (event) {\r\n        if(this.keyDirection[event.keyCode] != null){\r\n            this.key[event.keyCode] = false;\r\n        }\r\n        if(event.keyCode == this.speedingKey){\r\n            this.setTargetSpeeding(false);  \r\n        }\r\n    }\r\n});"]}