{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\o0Lib/assets\\Script\\o0Lib\\o0CC.js"],"names":["o0","require","module","exports","addScriptNode","parentNode","script","zIndex","arguments","length","node","cc","Node","scriptComponent","addComponent","addChild","addSpriteNode","imageNameInResourceFile","sprite","Sprite","loader","loadRes","SpriteFrame","err","spriteFrame","addGraphicNode","component","Graphics","rotationFromVector","modVector","rotation","angle","Vector2","y","vectorFromRotation","radian","Math","PI","cos","sin","nextRotation","currentRotation","targetRotation","turningSpeed","rotationDifference","abs","setGroup","groupIndex","active","scheduleOnce","randomBrightColor","c","Color","random","rate","max","getR","getG","getB","getA"],"mappings":"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","file":"o0CC.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\o0Lib","sourcesContent":["var o0 = require('o0');\r\n\r\nmodule.exports = {\r\n    /*\r\n    destroyNode: function(node) {\r\n        node.active = false;\r\n        var components = node.getComponents();\r\n        for(var i = 0;i<components.length;++i){\r\n            components[i].destroy();\r\n        }\r\n        node.destroy();\r\n    },/* */\r\n    addScriptNode: function(parentNode,script) {\r\n        var zIndex;\r\n        switch(arguments.length) {\r\n            default:\r\n            case 2:\r\n                zIndex = 0;\r\n                break;\r\n            case 3:\r\n                zIndex = arguments[2];\r\n                break;\r\n        }\r\n        var node = new cc.Node();\r\n        var scriptComponent = node.addComponent(script);\r\n        parentNode.addChild(node,zIndex);\r\n        return scriptComponent;\r\n    },\r\n    addSpriteNode: function(parentNode,imageNameInResourceFile) {\r\n        var zIndex;\r\n        switch(arguments.length) {\r\n            default:\r\n            case 2:\r\n                zIndex = 0;\r\n                break;\r\n            case 3:\r\n                zIndex = arguments[2];\r\n                break;\r\n        }\r\n        var node = new cc.Node();\r\n        parentNode.addChild(node,zIndex);\r\n        var sprite = node.addComponent(cc.Sprite);\r\n        cc.loader.loadRes(imageNameInResourceFile, cc.SpriteFrame, function (err, spriteFrame) {\r\n            sprite.spriteFrame = spriteFrame;\r\n        });\r\n        return sprite;\r\n    },\r\n    addGraphicNode: function(parentNode) {\r\n        var zIndex;\r\n        switch(arguments.length) {\r\n            default:\r\n            case 1:\r\n                zIndex = 0;\r\n                break;\r\n            case 2:\r\n                zIndex = arguments[1];\r\n                break;\r\n        }\r\n        var node = new cc.Node();\r\n        parentNode.addChild(node,zIndex);\r\n        var component = node.addComponent(cc.Graphics);\r\n        return component;\r\n    },\r\n    rotationFromVector: function(modVector){//rotation between 0-360 \r\n        var rotation = modVector.angle(new o0.Vector2(1,0));\r\n        if(modVector.y > 0)\r\n            rotation = 360-rotation;\r\n        return rotation;\r\n    },\r\n    vectorFromRotation: function(rotation){//rotation between 0-360 \r\n        var radian = rotation/180*Math.PI;\r\n        if(rotation<90)\r\n            return new o0.Vector2(Math.cos(radian),-Math.sin(radian));\r\n        if(rotation<180){\r\n            radian = Math.PI - radian;\r\n            return new o0.Vector2(-Math.cos(radian),-Math.sin(radian));\r\n        }\r\n        if(rotation<270){\r\n            radian -= Math.PI;\r\n            return new o0.Vector2(-Math.cos(radian),Math.sin(radian));\r\n        }\r\n        radian = Math.PI*2 - radian;/**/\r\n        return new o0.Vector2(Math.cos(radian),Math.sin(radian));\r\n    },\r\n    nextRotation: function(currentRotation, targetRotation, turningSpeed){//rotation between 0-360 \r\n        var rotationDifference = currentRotation - targetRotation;\r\n        if(Math.abs(rotationDifference) <= turningSpeed\r\n        ||Math.abs(rotationDifference+360) <= turningSpeed\r\n        ||Math.abs(rotationDifference-360) <= turningSpeed)\r\n            currentRotation = targetRotation;\r\n        else if((rotationDifference > 0 && rotationDifference < 180)\r\n        ||(rotationDifference > - 360 && rotationDifference < -180))\r\n            currentRotation -= turningSpeed;\r\n        else\r\n            currentRotation += turningSpeed;\r\n        if(currentRotation >= 360)\r\n            currentRotation -= 360;\r\n        if(currentRotation < 0)\r\n            currentRotation += 360;\r\n        return currentRotation;\r\n    },\r\n    setGroup:function(component,groupIndex){\r\n        if(component.node.groupIndex==groupIndex){\r\n            return;\r\n        }\r\n        component.node.active = false;\r\n        component.scheduleOnce(() => {\r\n            if(component!=null&&component.node!=null){\r\n                component.node.groupIndex = groupIndex;\r\n                component.node.active = true;\r\n            }\r\n        }, 0.1);/*用来解决cocos动态改变group的bug */\r\n    },\r\n    randomBrightColor:function(){\r\n        var c = new cc.Color(Math.random()*255, Math.random()*255, Math.random()*255, 255);\r\n        var rate = 255.0 / Math.max(c.getR(),c.getG(),c.getB(),c.getA());\r\n        return new cc.Color(c.getR()*rate,c.getG()*rate,c.getB()*rate,255);\r\n    },\r\n\r\n    \r\n};"]}