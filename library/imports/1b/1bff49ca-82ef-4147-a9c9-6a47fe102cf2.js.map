{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\SnakeInput/assets\\Script\\SnakeInput\\SnakeKeyboardSteeringInput.js"],"names":["o0","require","o0CC","cc","Class","extends","properties","keyTurning","key","speedingKey","onLoad","_super","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","Array","macro","KEY","right","left","d","a","space","onDestroy","off","update","dt","targetTurning","_key","setTargetTurning","event","keyCode","setTargetSpeeding"],"mappings":";;;;;;AAAA,IAAIA,KAAKC,QAAQ,IAAR,CAAT;AACA,IAAIC,OAAOD,QAAQ,MAAR,CAAX;;AAGAE,GAAGC,KAAH,CAAS;AACLC,aAASJ,QAAQ,sBAAR,CADJ;AAELK,gBAAY;AACRC,oBAAW,IADH;AAERC,aAAI,IAFI;AAGRC,qBAAY;AAHJ,KAFP;AAOLC,YAAQ,kBAAY;AAChB,aAAKC,MAAL;;AAEAR,WAAGS,WAAH,CAAeC,EAAf,CAAkBV,GAAGW,WAAH,CAAeC,SAAf,CAAyBC,QAA3C,EAAqD,KAAKC,SAA1D,EAAqE,IAArE;AACAd,WAAGS,WAAH,CAAeC,EAAf,CAAkBV,GAAGW,WAAH,CAAeC,SAAf,CAAyBG,MAA3C,EAAmD,KAAKC,OAAxD,EAAiE,IAAjE;;AAEA,aAAKZ,UAAL,GAAkB,IAAIa,KAAJ,EAAlB;AACA,aAAKb,UAAL,CAAgBJ,GAAGkB,KAAH,CAASC,GAAT,CAAaC,KAA7B,IAAsC,EAAtC;AACA,aAAKhB,UAAL,CAAgBJ,GAAGkB,KAAH,CAASC,GAAT,CAAaE,IAA7B,IAAqC,CAAC,EAAtC;AACA,aAAKjB,UAAL,CAAgBJ,GAAGkB,KAAH,CAASC,GAAT,CAAaG,CAA7B,IAAkC,EAAlC;AACA,aAAKlB,UAAL,CAAgBJ,GAAGkB,KAAH,CAASC,GAAT,CAAaI,CAA7B,IAAkC,CAAC,EAAnC;AACA,aAAKlB,GAAL,GAAW,IAAIY,KAAJ,EAAX;AACA,aAAKX,WAAL,GAAmBN,GAAGkB,KAAH,CAASC,GAAT,CAAaK,KAAhC;AACH,KApBI;AAqBLC,aArBK,uBAqBQ;AACTzB,WAAGS,WAAH,CAAeiB,GAAf,CAAmB1B,GAAGW,WAAH,CAAeC,SAAf,CAAyBC,QAA5C,EAAsD,KAAKC,SAA3D,EAAsE,IAAtE;AACAd,WAAGS,WAAH,CAAeiB,GAAf,CAAmB1B,GAAGW,WAAH,CAAeC,SAAf,CAAyBG,MAA5C,EAAoD,KAAKC,OAAzD,EAAkE,IAAlE;AACH,KAxBI;;AAyBLW,YAAQ,gBAAUC,EAAV,EAAc;AAClB,YAAIC,gBAAgB,CAApB;AACA,aAAI,IAAIC,IAAR,IAAgB,KAAK1B,UAArB,EAAgC;AAC5B,gBAAG,KAAKC,GAAL,CAASyB,IAAT,KAAkB,IAArB,EAA0B;AACtBD,iCAAe,KAAKzB,UAAL,CAAgB0B,IAAhB,CAAf;AACH;AACJ;AACD,aAAKC,gBAAL,CAAsBF,aAAtB;AACA,aAAKrB,MAAL;AACH,KAlCI;;AAoCLM,eAAW,mBAAUkB,KAAV,EAAiB;AACxB,YAAG,KAAK5B,UAAL,CAAgB4B,MAAMC,OAAtB,KAAkC,IAArC,EAA0C;AACtC,iBAAK5B,GAAL,CAAS2B,MAAMC,OAAf,IAA0B,IAA1B;AACH;AACD,YAAGD,MAAMC,OAAN,IAAiB,KAAK3B,WAAzB,EAAqC;AACjC,iBAAK4B,iBAAL,CAAuB,IAAvB;AACH;AACJ,KA3CI;AA4CLlB,aAAS,iBAAUgB,KAAV,EAAiB;AACtB,YAAG,KAAK5B,UAAL,CAAgB4B,MAAMC,OAAtB,KAAkC,IAArC,EAA0C;AACtC,iBAAK5B,GAAL,CAAS2B,MAAMC,OAAf,IAA0B,KAA1B;AACH;AACD,YAAGD,MAAMC,OAAN,IAAiB,KAAK3B,WAAzB,EAAqC;AACjC,iBAAK4B,iBAAL,CAAuB,KAAvB;AACH;AACJ;AAnDI,CAAT","file":"SnakeKeyboardSteeringInput.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\SnakeInput","sourcesContent":["var o0 = require('o0');\r\nvar o0CC = require('o0CC');\r\n\r\n\r\ncc.Class({\r\n    extends: require('SnakeSteeringControl'),\r\n    properties: {\r\n        keyTurning:null,\r\n        key:null,\r\n        speedingKey:0,\r\n    },\r\n    onLoad: function () {\r\n        this._super();\r\n\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n\r\n        this.keyTurning = new Array();\r\n        this.keyTurning[cc.macro.KEY.right] = 90;\r\n        this.keyTurning[cc.macro.KEY.left] = -90;\r\n        this.keyTurning[cc.macro.KEY.d] = 90;\r\n        this.keyTurning[cc.macro.KEY.a] = -90;\r\n        this.key = new Array();\r\n        this.speedingKey = cc.macro.KEY.space;\r\n    },\r\n    onDestroy () {\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);      \r\n    },\r\n    update: function (dt) {\r\n        var targetTurning = 0;\r\n        for(var _key in this.keyTurning){\r\n            if(this.key[_key] == true){\r\n                targetTurning+=this.keyTurning[_key];\r\n            }\r\n        }\r\n        this.setTargetTurning(targetTurning);\r\n        this._super();\r\n    },\r\n\r\n    onKeyDown: function (event) {\r\n        if(this.keyTurning[event.keyCode] != null){\r\n            this.key[event.keyCode] = true;\r\n        }\r\n        if(event.keyCode == this.speedingKey){\r\n            this.setTargetSpeeding(true);   \r\n        }\r\n    },\r\n    onKeyUp: function (event) {\r\n        if(this.keyTurning[event.keyCode] != null){\r\n            this.key[event.keyCode] = false;\r\n        }\r\n        if(event.keyCode == this.speedingKey){\r\n            this.setTargetSpeeding(false);  \r\n        }\r\n    }\r\n});"]}